version: 2

models:
    - name: stg_team_spaces
      description: Team spaces
      columns:
        - name: team_space_id
          description: Primary key for the team spaces.
          tests:
            - unique
            - not_null

        - name: name
          description: Name of the space.

        - name: team_name
          description: Name of the team this space belongs to.
          tests:
            - not_null

        - name: icon
          description: Emoji character attached to the space name.

        - name: is_common
          description: Whether this is the common space of the team.

        - name: is_owner_active
          description: Indicates whether the space owner is active.
            That is, they have confirmed their participation in the team and have not been deleted.

        - name: team_id
          description: The team id this space belongs to.
          tests:
            - not_null
            
        - name: owner_id
          description: The team member id that created this space.
          tests:
            - not_null:
                where: "is_common = false"
            - relationships:
                to: ref('stg_team_members')
                field: team_member_id

        - name: created_at
          description: Date time this space was created.

        - name: team_created_at
          description: The date the team was created.
          tests:
            - not_null
