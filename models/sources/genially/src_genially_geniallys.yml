version: 2

models:
    - name: src_genially_geniallys
      description: All geniallys created (by users, by employees, templates + collaboratives).
      columns:
        - name: genially_id
          description: Primary key for geniallys.
          tests:
            - unique
            - not_null

        - name: genially_type
          description: Type of genially.

        - name: subscription_plan
          description:  "{{ doc('subscription_codes') }}"
          tests:
            - not_null
            - accepted_values:
                values: "{{ get_plan_values() }}"

        - name: name
          description: Genially name.

        - name: tags
          description: Tags associated to the genially.

        - name: description
          description: Description of the genially.

        - name: friendly_url
          description: Url linking to social view.

        - name: is_published
          description: Whether the genially has been published.
          tests:
            - not_null

        - name: is_active
          description: Whether the genially is active at the user dashboard.
          tests:
            - not_null

        - name: is_in_recyclebin
          description: Whether the genially has been sent to the Recycle Bin.
          tests:
            - not_null

        - name: is_logically_deleted
          description: Whether the genially has been deleted from the Recycle Bin.
          tests:
            - not_null

        - name: is_deleted
          description: Whether the genially has been physically deleted.
          tests:
            - not_null

        - name: is_private
          description: Whether the genially can be indexed by search engines.
          tests:
            - not_null

        - name: is_password_free
          description: Whether the genially has an access password.
          tests:
            - not_null

        - name: is_in_social_profile
          description: Whether the genially is shown in user's social profile (This is different from social view).
          tests:
            - not_null

        - name: is_reusable
          description: Whether the genially can be reusable as a template by another user.
          tests:
            - not_null

        - name: is_inspiration
          description: Whether the genially is shown in inspiration.
          tests:
            - not_null

        - name: has_genially_analytics
          description: Whether the genially has tinybird analytics activated.
          tests:
            - not_null

        - name: user_id
          description: Foreign key referring to the user creating the genially.
          tests:
            - not_null
            - relationships:
                to: ref('src_genially_users')
                field: user_id
                severity: warn

        - name: analytics_id
          description: Foreign key referring to web analytics data.

        - name: reused_from_id
          description: Id of the original genially that this one is based on.

        - name: from_template_id
          description: Id of the template used for the creation of the genially.

        - name: team_id
          description: Id of the team this genially is part of.

        - name: space_id
          description: Id of the space this genially is part of.

        - name: team_template_id
          description: Id of the genially as a team template.

        - name: from_team_template_id
          description: Id of the team template used for the creation of the genially.

        - name: modified_at
          description: Modification date.

        - name: created_at
          description: Creation date.

        - name: published_at
          description: Publication date.

        - name: last_view_at
          description: Last time the genially was visualized.

        - name: deleted_at
          description: Deletion date.
