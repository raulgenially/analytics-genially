version: 2

models:  
    - name: users
      columns:
        - name: user_id
          description: Primary key for users.
          tests:
            - unique
            - not_null

        - name: plan
          description: "{{ doc('subscription_codes') }}"
          tests:
            - not_null
            - accepted_values:
                values: ['Free', 'Pro', 'Master', 'Edu Pro', 'Edu Team', 'Team', 'Student']

        - name: sector
          description: Sector (see data/new_sector_codes.csv and data/old_sector_codes.csv).
          tests:
            - not_null

        - name: role
          description: Role (see data/new_role_codes.csv and data/old_role_codes.csv).
          tests:
            - not_null

        - name: market
          description: Country.
          tests:
            - not_null

        - name: email
          description: Email account (same as username).
          tests:
            - not_null

        - name: social_profile_name
          description: Social Profiles alias & URL. 

        - name: n_total_creations
          description: Total number of creations (including those that has been removed).
          tests:
            - not_null

        - name: n_active_creations
          description: Total number of active creations, that is, creations that have not been removed.
          tests:
            - not_null

        - name: n_published_creations
          description: Total number of published creations (including those that has been removed).
          tests:
            - not_null

        - name: n_active_published_creations
          description: Total number of published creations that are active.
          tests:
            - not_null

        - name: n_creations_in_social_profile
          description: Total number of creations that have been published in user's social profile at some point.
          tests:
            - not_null

        - name: n_active_creations_in_social_profile
          description: Total number of creations that have been published in user's social profile and are active. 
            Note that the user's social profile might not be currently active (see is_social_profile_active field).
          tests:
            - not_null

        - name: is_validated
          description: Whether the user has validated their account.
          tests:
            - not_null

        - name: is_social_profile_active
          description: Whether the user's social profile is active or not.
          tests:
            - not_null

        - name: is_collaborator
          description: Whether the user forms part of a collaboration (active or not). The user might be or not the owner.
          tests:
            - not_null

        - name: is_collaborator_of_published_creation
          description: Whether the user forms part of a collaboration (active or not) that has been published at some point. The user might be or not the owner.
          tests:
            - not_null

        - name: is_collaborator_of_creation_in_social_profile
          description: Whether the user forms part of a collaboration (active or not) that has been published in owner's social profile at some point. The user might be or not the owner.
            Owner's social profile might not be currently active.
          tests:
            - not_null

        - name: registered_at
          description: Registration date.

        - name: last_access_at
          description: Last access date.
